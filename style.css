/* =========================================================
   Blurb — Loud & Playful (Flat Colors, Cream base)
   Keeps your class names. No gradients anywhere.
   ========================================================= */

/* ---- Palette ---- */
:root {
  /* base */
  --cream: #f6efe3;
  --text-dark: #1e1c23;
  --text-light: #ffffff;
  --muted: #5c5968;
  --card: #ffffff;
  --stroke: rgba(0,0,0,.08);

  --radius-xxl: 32px;

  /* brand (flat) */
  --happy: #ffd400;  /* yellow */
  --bat:   #7f27a8;  /* purple */
  --pond:  #53b0c9;  /* teal */
  --juice: #f76400;  /* orange */
  --heart: #c1008f;  /* magenta */
  --cheek: #e885cf;  /* pink */

  /* accessible on-colors */
  --on-happy: var(--text-dark);
  --on-bat:   var(--text-light);
  --on-pond:  var(--text-light);
  --on-juice: var(--text-dark);
  --on-heart: var(--text-light);
  --on-cheek: var(--text-dark);

  /* roles (you can swap with theme classes below) */
  --primary: var(--happy);
  --on-primary: var(--on-happy);
  --hero: var(--happy);   /* top “phone” panel color */
}

/* optional theme switchers (add to <body>) */
.theme-happy { --primary: var(--happy); --on-primary: var(--on-happy); --hero: var(--happy); }
.theme-bat   { --primary: var(--bat);   --on-primary: var(--on-bat);   --hero: var(--bat); }
.theme-pond  { --primary: var(--pond);  --on-primary: var(--on-pond);  --hero: var(--pond); }
.theme-juice { --primary: var(--juice); --on-primary: var(--on-juice); --hero: var(--juice); }
.theme-heart { --primary: var(--heart); --on-primary: var(--on-heart); --hero: var(--heart); }
.theme-cheek { --primary: var(--cheek); --on-primary: var(--on-cheek); --hero: var(--cheek); }

/* ---- Base ---- */
* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; }
body {
  background: var(--cream);
  color: var(--text-dark);
  font-family: "Fredoka","Nunito",ui-sans-serif,system-ui,Arial;
  line-height: 1.3;
}

/* layout */
.page { min-height: 100%; display: grid; place-items: center; padding: 40px 20px; }
.splash { width: min(560px, 92vw); }
.card, .auth-card {
  background: var(--card);
  border: 1px solid var(--stroke);
  border-radius: var(--radius-xxl);
  box-shadow: 0 24px 60px rgba(0,0,0,.06);
  padding: 36px 28px 28px;
  text-align: center;
}

/* logo */
.badge { width: 132px; height: 132px; margin: 4px auto 16px; border-radius: 28px; background: var(--primary); display: grid; place-items: center; }
.brand-svg { width: 78%; height: 78%; color: var(--on-primary); }

/* text */
.title { margin: 4px 0 8px; font-weight: 900; font-size: clamp(28px, 5.5vw, 38px); letter-spacing: .2px; }
.subtitle { margin: 0 0 20px; color: var(--muted); font-weight: 700; }

/* progress bar */
.bar { --h: 18px; height: var(--h); width: 100%; border-radius: 999px; background: #f1f1f4; border: 1px solid var(--stroke); overflow: hidden; }
.bar-fill { height: 100%; width: 0%; background: var(--primary); transition: width 260ms cubic-bezier(.2,.8,.2,1); }
.percent { margin: 12px 0 0; color: var(--muted); font-weight: 700; }

/* sparkles (unchanged) */
.sparkles { position: fixed; inset: 0; pointer-events: none; z-index: 9999; }
.sparkles .star { position: absolute; color: var(--primary); text-shadow: 0 0 6px rgba(255,255,255,.7); opacity: 0; }

/* misc */
.noscript { margin: 16px; padding: 12px 16px; background: #ffd8d6; color: #5b0b00; border-radius: 12px; }

/* auth */
.auth { width: min(550px, 92vw); margin: 12px auto; }
.auth-card { padding: 22px; box-shadow: 0 24px 60px rgba(0,0,0,.05); text-align: left;}

/* Explicit left alignment for the pieces you called out */
.auth-card .form-row label,
.auth-card .hint,
.auth-card .reqs,
.auth-card .form-status,
.auth-card .alt-action {
  text-align: left;
}

/* Small spacing tidy-ups */
.auth-card .panel { 
  max-width: 560px; 
  margin: 0 auto;
}
.auth-card .alt-action { 
  margin-top: 12px; 
}


/* tabs */
.tabs { display: flex; gap: 8px; justify-content: center; margin-bottom: 10px; }
.tab {
  appearance: none; border: 1px solid var(--stroke); background: #fff;
  padding: 10px 16px; border-radius: 999px; font-weight: 900; cursor: pointer; color: var(--muted);
}
.tab.is-active { background: var(--primary); color: var(--on-primary); border-color: var(--primary); }

.panel { margin-top: 8px; }
.panel.is-hidden { display: none; }

/* forms */
.form-row { margin: 14px 0; }
.form-row label { display: block; font-weight: 900; margin: 0 0 6px; }
.input-with-btn { display: flex; gap: 8px; }

input[type="email"], input[type="password"], input[type="text"] {
  width: 100%; padding: 12px 14px; border-radius: 16px;
  border: 1px solid var(--stroke); background: #fff; color: var(--text-dark); font: inherit;
}
input:focus { outline: none; box-shadow: 0 0 0 3px rgba(0,0,0,.05); border-color: var(--primary); }

.ghost-btn { border: 1px solid var(--stroke); background: #fff; color: var(--text-dark); padding: 0 12px; border-radius: 12px; font-weight: 900; cursor: pointer; }

.row-flex { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
.checkbox { display: flex; align-items: center; gap: 10px; cursor: pointer; }
.checkbox input { width: 18px; height: 18px; }

/* primary button */
.primary-btn {
  width: 100%; padding: 12px 14px; border-radius: 18px; border: 1px solid var(--primary);
  cursor: pointer; font-weight: 900; color: var(--on-primary); background: var(--primary);
  box-shadow: 0 6px 16px rgba(0,0,0,.08);
}

/* links */
.link { background: none; border: none; color: var(--bat); text-decoration: underline; cursor: pointer; font-weight: 900; }

/* strength meter (flat) */
.strength { height: 8px; width: 100%; border-radius: 999px; background: #f1f1f4; border: 1px solid var(--stroke); overflow: hidden; margin-top: 8px; }
.strength-fill { height: 100%; width: 0%; background: var(--primary); transition: width 200ms ease; }

/* req list */
.reqs { list-style: none; padding: 8px 0 0; margin: 0; display: grid; gap: 6px; color: var(--muted); }
.reqs li { display: flex; align-items: center; gap: 8px; }
.reqs li::before { content: "✗"; color: #b34a4a; font-weight: 900; }
.reqs li.ok { color: #1f6a48; }
.reqs li.ok::before { content: "✓"; color: #1f6a48; }

.hint { margin: 6px 0 0; min-height: 1.2em; color: var(--muted); }
.form-status { margin-top: 10px; min-height: 1.4em; font-weight: 900; }

.sr-only {
  position: absolute !important; width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
}

/* ---- Onboarding “phone card” ---- */
.pref-shell { position: relative; width: min(440px, 92vw); margin-inline: auto; padding: 32px 0 28px; }
.pref-card {
  position: relative; margin: 14px; padding: 18px 18px 20px; border-radius: 28px;
  background: var(--card); border: 1px solid var(--stroke); box-shadow: 0 20px 46px rgba(0,0,0,.10);
}

/* Step progress (2/4) */
/* Top step progress (centered, shorter width) */
.flow-progress {
  width: 60%;              /* shorter bar */
  max-width: 480px;        /* prevents it from getting huge */
  margin: 20px auto 24px;  /* centers it */
  text-align: center;
}

/* Bigger but still secondary to page title */
.flow-meta {
  font-weight: 800;
  font-size: 1rem;         /* was .85rem */
  color: var(--text);
  margin-bottom: 8px;
  letter-spacing: -0.2px;
}

/* Progress bar container */
.flow-bar {
  height: 10px;
  background: #ebe8e0;
  border-radius: 999px;
  overflow: hidden;
  border: 1px solid var(--stroke);
}

/* Filling section */
.flow-fill {
  height: 100%;
  background: var(--primary);
  border-radius: inherit;
  transition: width .3s ease;
}

.flow-fill.step-2 { width: 50%; }
.flow-fill.step-3 { width: 75%; }
.flow-fill.step-4 { width: 100%; }


/* header */
.pref-top { display: flex; align-items: center; gap: 12px; padding: 2px 2px 10px; }
.icon-btn {
  appearance: none; border: 1px solid var(--stroke); background: var(--card); color: var(--text-dark);
  width: 36px; height: 36px; border-radius: 999px; cursor: pointer; font-weight: 900; font-size: 18px; line-height: 1;
}
.pref-title { margin: 0; font-weight: 900; font-size: 24px; letter-spacing: .2px; color: var(--text-dark); }
.pref-sub { margin: .25rem 0 0; color: var(--muted); font-weight: 700; font-size: .92rem; }

/* progress */
.pref-progress { margin: 8px 2px 12px; }
.pref-count { display: inline-block; font-weight: 900; font-size: .85rem; color: var(--muted); margin-bottom: 6px; }
.pill { height: 12px; width: 100%; background: #f1f1f4; border: 1px solid var(--stroke); border-radius: 999px; overflow: hidden; }
.pill-fill { height: 100%; width: 0%; background: var(--juice); transition: width .22s ease; }

/* chips */
.chip-group { display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 10px; margin: 10px 0 16px; }
@media (max-width: 430px) { .chip-group { grid-template-columns: repeat(2, minmax(0,1fr)); } }

.chip{
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  padding: 10px 12px; border-radius: 999px; border: 1px solid var(--stroke);
  background: #fff; color: var(--text-dark); cursor: pointer; font-size: .95rem; font-weight: 900;
  box-shadow: 0 1px 0 rgba(0,0,0,.04); transition: transform .06s ease, box-shadow .18s ease, background .18s ease, border-color .18s ease;
  width: 100%;          /* take the whole grid cell */
  min-width: 0;         /* allow shrinking with the grid */
  max-width: 100%;
  white-space: normal;  /* allow line breaks */
  overflow: visible;    /* no clipping */
  text-overflow: clip;  /* no ellipsis */
  text-align: center;
  line-height: 1.15;
  padding: 12px 12px;   /* a bit taller to fit 2 lines if needed */
  min-height: 44px;     /* consistent row height */
}
.chip:hover { transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,.06); }
.chip:focus-visible { outline: 2px solid var(--primary); outline-offset: 2px; }

.pref-card .chip-group{
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

/* selected chips — rotate through brand colors via nth-child */
.chip.selected { border-color: transparent; box-shadow: 0 10px 22px rgba(0,0,0,.10); }
#hobbyChoices .chip.selected:nth-child(6n+1),
#genreChoices .chip.selected:nth-child(6n+1) { background: var(--happy); color: var(--on-happy); }
#hobbyChoices .chip.selected:nth-child(6n+2),
#genreChoices .chip.selected:nth-child(6n+2) { background: var(--bat);   color: var(--on-bat); }
#hobbyChoices .chip.selected:nth-child(6n+3),
#genreChoices .chip.selected:nth-child(6n+3) { background: var(--pond);  color: var(--on-pond); }
#hobbyChoices .chip.selected:nth-child(6n+4),
#genreChoices .chip.selected:nth-child(6n+4) { background: var(--juice); color: var(--on-juice); }
#hobbyChoices .chip.selected:nth-child(6n+5),
#genreChoices .chip.selected:nth-child(6n+5) { background: var(--heart); color: var(--on-heart); }
#hobbyChoices .chip.selected:nth-child(6n+6),
#genreChoices .chip.selected:nth-child(6n+6) { background: var(--cheek); color: var(--on-cheek); }
.chip.selected::after { content: "✓"; margin-left: 6px; font-weight: 900; }

/* buttons */
.btn { font: inherit; padding: 12px 16px; border-radius: 14px; border: 1px solid var(--stroke); background: #fff; cursor: pointer; }
.btn-primary { background: var(--primary); border-color: var(--primary); color: var(--on-primary); }
.btn-ghost { background: transparent; }
.btn:disabled { opacity: .5; cursor: not-allowed; }
.actions { display: flex; gap: 12px; }
.pref-step.is-hidden { display: none; }

/* stepper (if used elsewhere) */
.stepper { display: flex; align-items: center; gap: 8px; margin: 8px 0 16px; }
.stepper .divider { flex: 1; height: 2px; background: var(--stroke); border-radius: 99px; }
.stepper .step { font-size: .9rem; padding: 6px 10px; border-radius: 999px; border: 1px solid var(--stroke); background: #fff; color: var(--muted); }
.stepper .step.is-active { background: var(--primary); color: var(--on-primary); border-color: var(--primary); }

/* tidy outer page */
.page { padding: 32px 12px; }

/* Falling emoji pop when selecting a chip */
.float-emoji{
  position: fixed;
  left: 0; top: 0;
  pointer-events: none;
  font-size: 24px;
  filter: drop-shadow(0 4px 6px rgba(0,0,0,.12));
  animation: floatFall 700ms ease-out forwards;
  z-index: 9999;
}

@keyframes floatFall{
  0%   { transform: translate(0,0) scale(.9); opacity: 1; }
  70%  { transform: translate(var(--dx, 0px), 70px) scale(1.05); opacity: .95; }
  100% { transform: translate(var(--dx, 0px), 110px) scale(.95); opacity: 0; }
}

/* =========================================================
   Avatar grid: force circle tiles (override global .chip)
   ========================================================= */
#pref-step-avatars .avatar-grid {
  display: grid !important;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}

#pref-step-avatars .avatar-hero {
  display: grid;
  grid-template-columns: 40px 1fr auto; /* back btn | text | continue btn */
  align-items: center;
  position: relative;
}

/* Center the emoji by making it span all columns */
#pref-step-avatars .hero-emoji {
  grid-column: 1 / -1;        /* spans full width */
  justify-self: center;       /* horizontal center */
  margin: 10px 0 4px;
}

/* Hard override the chip look only in the avatar grid */
#pref-step-avatars .avatar-grid .chip.avatar-card {
  /* nuke pill-row behavior */
  display: grid !important;
  place-items: center !important;
  padding: 0 !important;
  margin: 0 !important;
  width: 100% !important;
  aspect-ratio: 1 / 1 !important;
  border-radius: 9999px !important;

  /* visual style */
  border: 2px solid var(--bat) !important;
  background: #fff !important;
  box-shadow: 0 2px 6px rgba(0,0,0,.06) !important;
  cursor: pointer !important;
  position: relative !important;

  /* kill any leftover flex/text formatting from .chip */
  line-height: 1 !important;
  justify-content: center !important;
  align-items: center !important;
  text-align: center !important;
}

/* Emoji + labels */
#pref-step-avatars .hero-emoji {
  font-size: clamp(140px, 28vw, 220px); /* larger than before */
  margin-block: 4px 6px;
}

#pref-step-avatars .avatar-grid .chip.avatar-card .emoji {
  font-size: 28px;
  line-height: 1;
  pointer-events: none;
}

#pref-step-avatars .avatar-grid .chip.avatar-card .cost {
  position: absolute;
  bottom: 6px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 11px;
  opacity: .8;
}
#pref-step-avatars .avatar-grid .chip.avatar-card .cost.free { opacity: .6; }

#pref-step-avatars .avatar-grid .chip.avatar-card .lock {
  position: absolute;
  font-size: 22px;
  color: var(--bat);
  opacity: .9;
  right: 8px;
  top: 8px;
  pointer-events: none;
}

/* Avatar hover glow */
#pref-step-avatars .avatar-grid .chip.avatar-card:hover:not(.is-locked) {
  box-shadow: 0 0 0 4px var(--bat), 0 0 18px var(--bat) !important; /* <-- add !important */
  transform: translateY(-2px) !important;
  border-color: var(--bat) !important;
  z-index: 2;
}

/* Selected state glow */
#pref-step-avatars .avatar-grid .chip.avatar-card.selected {
  box-shadow: 0 0 0 5px var(--bat), 0 0 22px var(--bat) !important; /* <-- add !important */
  border-color: var(--bat) !important;
}


/* Locked look */
#pref-step-avatars .avatar-grid .chip.avatar-card.is-locked {
  opacity: .75;
}
#pref-step-avatars .avatar-grid .chip.avatar-card.is-locked .emoji {
  filter: grayscale(.2);
}

#pref-step-avatars .hero-emoji.animate {
  animation: pop 250ms ease-out;
}

@keyframes pop {
  0%   { transform: scale(.6); opacity: .4; }
  100% { transform: scale(1); opacity: 1; }
}

/* ===== Remove any tick/check added by global .chip styles ONLY in Step 4 ===== */
#pref-step-avatars .avatar-grid .chip.avatar-card.selected::after,
#pref-step-avatars .avatar-grid .chip.avatar-card.selected::before {
  content: none !important;
  display: none !important;
  background: none !important;
  mask: none !important;
  -webkit-mask: none !important;
}

/* Some kits add the tick as a background on the button itself */
#pref-step-avatars .avatar-grid .chip.avatar-card.selected {
  background-image: none !important;
}

/* Responsive: 3 columns on narrow screens */
@media (max-width: 420px) {
  #pref-step-avatars .avatar-grid { grid-template-columns: repeat(3, 1fr); }
}

/* ===== Sticky header (cleaned) ===== */
.has-header { padding-top: 0; }

.site-header {
  position: sticky;
  top: 0;
  z-index: 1000; /* stays above the white bg */
  background: transparent; /* no internal white */
}

.site-header__inner {
  height: 84px;                          /* taller bar to fit bigger icons */
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 14px;
  display: flex;
  align-items: center;
  gap: 14px;
  background: transparent;
}

/* ===== Brand (left) ===== */
.brand {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  text-decoration: none;
  color: var(--text-dark);
  font-weight: 900;
  letter-spacing: .2px;
}

.brand-mark {
  width: 60px;                             /* bigger logo badge */
  height: 60px;
  border-radius: 18px;
  background: var(--primary);
  display: grid;
  place-items: center;
  border: 1px solid var(--stroke);
  box-shadow: 0 6px 16px rgba(0,0,0,.06);
}

.brand-mark .brand-svg {                   /* keep svg sized inside badge */
  width: 78%;
  height: 78%;
  color: var(--on-primary);
}

.brand-name { font-size: 1.75rem; }        /* larger wordmark */

/* ===== Right side ===== */
/* User avatar sits at the far right even if nav is hidden */
.user {
  margin-left: auto;
  display: inline-flex;
  align-items: center;
  text-decoration: none;
}

/* Image avatar (if you ever swap to URLs) */
.avatar {
  width: 48px;
  height: 48px;
  border-radius: 999px;
  border: 1px solid var(--stroke);
  box-shadow: 0 6px 16px rgba(0,0,0,.06);
  object-fit: cover;
  background: var(--cream);
}

/* Emoji/fallback avatar */
.avatar--fallback {
  display: grid;
  place-items: center;
  width: 60px;
  height: 60px;
  line-height: 60px;
  font-weight: 800;
  font-size: 2.4rem;                       /* bigger emoji */
  color: var(--on-primary);
  background: var(--primary);
  border-radius: 999px;
  border: 1px solid var(--stroke);
  box-shadow: 0 6px 16px rgba(0,0,0,.06);
}

/* Tiny polish */
.avatar--fallback:hover { transform: scale(1.06); transition: .15s ease; }

/* ===== Responsive tweak ===== */
@media (max-width: 520px) {
  .site-header__inner { height: 64px; }
  .has-header { padding-top: 64px; }
  .brand-mark, .avatar, .avatar--fallback { width: 44px; height: 44px; line-height: 44px; }
  .brand-name { font-size: 1.25rem; }
}

/* Page base */
.home { padding: 16px 16px 120px; max-width: 480px; margin: 0 auto; }
.home-hero { text-align: center; margin-top: 8px; }
.home-title {
  font-family: 'Fredoka', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-weight: 900;
  font-size: clamp(2rem, 6vw, 2.4rem);
  color: #3a3a3a;
  margin: 6px 0 10px;
}

/* CTA */
.btn { appearance: none; border: none; cursor: pointer; font-family: inherit; }
.btn-primary {
  margin-top: 8px;
  padding: 14px 26px;
  font-weight: 700;
  font-size: 1.05rem;
  color: var(--text-dark);
  background: var(--primary);
  border-radius: 999px;
  box-shadow: 0 6px 18px rgba(0,0,0,.12);
}
.btn-primary:active { transform: translateY(1px); }

/* Suggestions */
.section-title {
  margin: 28px 0 4px;
  font-family: 'Fredoka', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-weight: 900;
  font-size: clamp(1.6rem, 5vw, 2rem);
  color: #3a3a3a;
}
.section-subtitle {
  margin: 0 0 12px;
  font-style: italic;
  color: #6b6b6b;
}

.cards { display: grid; gap: 12px; }
.book-card {
  display: grid;
  grid-template-columns: 56px 1fr;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: #fff;
  border-radius: 18px;
  border: 1px solid rgba(0,0,0,.06);
  box-shadow: 0 8px 20px rgba(0,0,0,.06);
}
.book-card .cover {
  width: 56px; height: 56px; border-radius: 12px; display: grid; place-items: center;
  font-size: 1.6rem; background: #f3f3f3; border: 1px solid rgba(0,0,0,.06);
}
.book-card .meta h3 { margin: 0 0 4px; font-size: 1.05rem; }
.book-card .meta p { margin: 0; color: #777; }

/* Bottom Tabbar */
/* ==== Bottom Tabbar v2 (polished) ==== */
.tabbar{
  position: fixed;
  left: 50%;
  bottom: max(16px, env(safe-area-inset-bottom));   /* iOS safe area */
  transform: translateX(-50%);
  width: min(560px, 92vw);
  background: #fff;
  border-radius: 28px;
  border: 1px solid rgba(0,0,0,.08);
  box-shadow: 0 14px 36px rgba(0,0,0,.16);
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  padding: 10px 12px;
  gap: 8px;
}

/* Each tab is a big, comfy target */
.tab{
  position: relative;
  display: grid;
  place-items: center;
  height: 64px;                        /* bigger tap target */
  border-radius: 18px;
  text-decoration: none;
  color: #111;
  transition: transform .08s ease, background .18s ease, box-shadow .18s ease;
  outline: none;
}

/* Icon size & smoothing */
.tab svg{ width: 34px; height: 34px; }

/* Active pill + subtle border to match your brand yellow */
.tab.is-active{
  background: linear-gradient(#fff, #fff) padding-box,
              linear-gradient(180deg, var(--primary), rgba(0,0,0,.05)) border-box;
  border: 2px solid transparent;
  box-shadow: 0 8px 18px rgba(0,0,0,.12);
}

/* Active icon inherits brand color */
.tab.is-active svg{ color: var(--on-primary); fill: currentColor; }
.tab.is-active{ color: var(--on-primary); }

/* Hover/press polish */
.tab:hover{ background: rgba(0,0,0,.05); }
.tab:active{ transform: translateY(1px); }

/* Strong visible focus for keyboard users */
.tab:focus-visible{
  box-shadow: 0 0 0 3px rgba(0,0,0,.08), 0 0 0 6px var(--primary);
}

/* Optional labels below icons (mobile hides by default) */
.tab .label{
  position: absolute;
  bottom: 6px;
  font-size: .72rem;
  font-weight: 900;
  letter-spacing: .2px;
  color: #222;
  opacity: .85;
  user-select: none;
  display: none;                       /* show on larger screens */
}
@media (min-width: 480px){
  .tabbar{ grid-template-columns: repeat(3, 1fr); padding: 12px 14px; }
  .tab{ height: 68px; }
  .tab .label{ display: block; }
}

/* Little unread badge you can toggle with JS: <a class="tab"><span class="badge">3</span>… */
.tab .badge{
  position: absolute;
  top: 8px;
  right: 12px;
  min-width: 18px; height: 18px;
  padding: 0 5px;
  background: var(--heart);
  color: var(--on-heart);
  border-radius: 999px;
  border: 2px solid #fff;
  font-size: 11px; font-weight: 900;
  line-height: 14px; text-align: center;
}

/* Reduce size a touch on tiny phones */
@media (max-width: 360px){
  .tab svg{ width: 30px; height: 30px; }
  .tab{ height: 58px; }
}

/* If you keep your icon-sprite classes, let them follow currentColor */
.material-symbols--home-rounded,
.ion--library,
.fluent--people-team-20-filled{
  filter: none;
}


.material-symbols--home-rounded {
  display: inline-block;
  width: 48px;
  height: 48px;
  background-repeat: no-repeat;
  background-size: 100% 100%;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23000' d='M4 19v-9q0-.475.213-.9t.587-.7l6-4.5q.525-.4 1.2-.4t1.2.4l6 4.5q.375.275.588.7T20 10v9q0 .825-.588 1.413T18 21h-3q-.425 0-.712-.288T14 20v-5q0-.425-.288-.712T13 14h-2q-.425 0-.712.288T10 15v5q0 .425-.288.713T9 21H6q-.825 0-1.412-.587T4 19'/%3E%3C/svg%3E");
}

.ion--library {
  display: inline-block;
  width: 48px;
  height: 48px;
  background-repeat: no-repeat;
  background-size: 100% 100%;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23000' d='M64 480H48a32 32 0 0 1-32-32V112a32 32 0 0 1 32-32h16a32 32 0 0 1 32 32v336a32 32 0 0 1-32 32m176-304a32 32 0 0 0-32-32h-64a32 32 0 0 0-32 32v28a4 4 0 0 0 4 4h120a4 4 0 0 0 4-4ZM112 448a32 32 0 0 0 32 32h64a32 32 0 0 0 32-32v-30a2 2 0 0 0-2-2H114a2 2 0 0 0-2 2Z'/%3E%3Crect width='128' height='144' x='112' y='240' fill='%23000' rx='2' ry='2'/%3E%3Cpath fill='%23000' d='M320 480h-32a32 32 0 0 1-32-32V64a32 32 0 0 1 32-32h32a32 32 0 0 1 32 32v384a32 32 0 0 1-32 32m175.89-34.55l-32.23-340c-1.48-15.65-16.94-27-34.53-25.31l-31.85 3c-17.59 1.67-30.65 15.71-29.17 31.36l32.23 340c1.48 15.65 16.94 27 34.53 25.31l31.85-3c17.59-1.67 30.65-15.71 29.17-31.36'/%3E%3C/svg%3E");
}

.fluent--people-team-20-filled {
  display: inline-block;
  width: 48px;
  height: 48px;
  background-repeat: no-repeat;
  background-size: 100% 100%;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3E%3Cpath fill='%23000' d='M12.5 4.5a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0m5 .5a2 2 0 1 1-4 0a2 2 0 0 1 4 0m-13 2a2 2 0 1 0 0-4a2 2 0 0 0 0 4M6 9.25C6 8.56 6.56 8 7.25 8h5.5c.69 0 1.25.56 1.25 1.25V14a4 4 0 0 1-8 0zm-1 0c0-.463.14-.892.379-1.25H3.25C2.56 8 2 8.56 2 9.25V13a3 3 0 0 0 3.404 2.973A5 5 0 0 1 5 14zM15 14c0 .7-.144 1.368-.404 1.973Q14.794 16 15 16a3 3 0 0 0 3-3V9.25C18 8.56 17.44 8 16.75 8h-2.129c.24.358.379.787.379 1.25z'/%3E%3C/svg%3E");
}

/* Book suggestions */
/* --- Book rail fixes (override globals) --- */

/* Make the arrows ignore global button styles */
.rail-btn{
  all: unset;                 /* wipe inherited button styles */
  display: grid;
  place-items: center;
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.12);
  background: #fff;
  box-shadow: 0 8px 18px rgba(0,0,0,.08);
  font-weight: 900;
  line-height: 1;
  cursor: pointer;
}
.rail-btn:disabled{ opacity:.4; cursor:not-allowed; }

/* Keep tiles compact and clipped */
/* --- Fix tag clipping in book cards --- */
.book-tile{
  overflow: visible !important;     /* let content extend to full height */
  max-height: none !important;      /* remove the cap that was cutting tags */
  padding-bottom: 12px;             /* breathing room for chips */
  display: grid;
  grid-template-rows: auto auto auto; /* cover, meta, tags */
}

/* Only the COVER should clip its own corners */
.book-cover{
  overflow: hidden;
  border-radius: 12px;
  background-color: #f3f3f3;
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
}

/* Tag row: ensure it can wrap and stay visible */
.tag-row{
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 8px;
  padding-bottom: 4px;              /* keeps descenders from touching the edge */
}

/* If a bottom navbar floats above the page, give the rail room */
.book-rail-wrap{ margin-bottom: 84px; }   /* adjust if your navbar is taller */
.book-rail{ padding-bottom: 12px; }       /* extra clearance inside the scroll area */



/* If you used an <img> inside .book-cover, crop it */
.book-cover img{
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;           /* crop instead of stretching */
  border-radius: 12px;
}

/* Make the rail behave nicely on small screens */
.book-rail{
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding: 4px 2px 10px;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  scrollbar-width: none;
}
.book-rail::-webkit-scrollbar{ display: none; }


.book-tile{
  flex: 0 0 190px;              /* visible tile width */
  scroll-snap-align: start;
  background: #fff;
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 18px;
  box-shadow: 0 8px 20px rgba(0,0,0,.06);
  padding: 10px;
  display: grid;
  grid-template-rows: auto auto 1fr;
  gap: 8px;
}

.book-cover{
  width: 100%;
  aspect-ratio: 2/3;
  border-radius: 12px;
  background: #f3f3f3 center/cover no-repeat;
  border: 1px solid rgba(0,0,0,.06);
}

/* Ensure tag chips inside book tiles are pills, not circles */
.book-tile .tag{
  all: unset;                  /* wipe any global .tag rules */
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 999px;
  background: var(--primary, #ffcc00);
  border: 1px solid rgba(0,0,0,.15);
  color: var(--on-primary, #000);
  font-size: 0.72rem;
  font-weight: 700;
  line-height: 1.1;
  white-space: nowrap;         /* keep each chip on one line */
  box-sizing: border-box;
}

.book-tile .tag.faded{
  background: #eee;
  border-color: rgba(0,0,0,.12);
  color: #555;
  opacity: .9;
}


.book-meta h3{
  margin: 4px 0 2px;
  font-size: 1rem;
  line-height: 1.15;
}
.book-meta .byline{
  margin: 0;
  color: #666;
  font-size: .9rem;
}
.book-meta .pages{
  margin: 2px 0 0;
  color: #777;
  font-size: .85rem;
}

/* tag chips for matched hobbies/genres */
.tag-row{
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 6px;
}
.tag{
  display: inline-flex;
  align-items: center;
  padding: 4px 8px;
  border-radius: 999px;
  background: var(--primary);
  color: var(--on-primary);
  font-weight: 800;
  font-size: .72rem;
  border: 1px solid var(--primary);
}
